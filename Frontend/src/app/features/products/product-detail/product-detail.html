<app-header></app-header>

<div class="product-detail-container">
  <!-- Back button -->
  <button class="back-btn" (click)="goBack()">
    ← Back to Products
  </button>

  <!-- Loading state -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Loading product...</p>
  </div>

  <!-- Product detail -->
  <div *ngIf="!loading && product" class="product-detail">
    <!-- Left section - Images -->
    <div class="image-section">
      <div class="main-image">
        <img [src]="product.images[selectedImageIndex]" [alt]="product.name">
      </div>
      <div class="thumbnail-list">
        <div *ngFor="let image of product.images; let i = index" 
             class="thumbnail" 
             [class.active]="i === selectedImageIndex"
             (click)="selectImage(i)">
          <img [src]="image" [alt]="product.name">
        </div>
      </div>
    </div>

    <!-- Right section - Product info -->
    <div class="info-section">
      <div class="brand">{{ product.brand }}</div>
      <h1 class="product-title">{{ product.name }}</h1>
      
      <div class="rating">
        <div class="stars">
          <span *ngFor="let star of getStars(product.rating)" 
                class="star" 
                [class.filled]="star === 'filled'">★</span>
        </div>
        <span class="rating-text">{{ product.rating }} ({{ product.reviewCount }} reviews)</span>
      </div>

      <div class="price">${{ product.price.toFixed(2) }}</div>

      <div class="description">
        <p>{{ product.description }}</p>
      </div>

      <!-- Color options -->
      <div class="option-group">
        <h3>Color</h3>
        <div class="color-options">
          <div *ngFor="let color of product.colors" 
               class="color-swatch" 
               [class.selected]="selectedColor === color.name"
               [style.background-color]="color.value"
               [title]="color.name"
               (click)="selectColor(color.name)">
          </div>
        </div>
      </div>

      <!-- Size options -->
      <div class="option-group">
        <h3>Size</h3>
        <div class="size-options">
          <button *ngFor="let size of product.sizes" 
                  class="size-btn" 
                  [class.selected]="selectedSize === size"
                  (click)="selectSize(size)">
            {{ size }}
          </button>
        </div>
      </div>

      <!-- Add to cart -->
      <button class="add-to-cart-btn" (click)="addToCart()">
        Add to Cart
      </button>

      <!-- Delivery info -->
      <div class="delivery-info">
        <p>{{ product.deliveryInfo }}</p>
      </div>
    </div>
  </div>

  <!-- Error state -->
  <div *ngIf="!loading && !product" class="error-state">
    <p>Product not found</p>
    <button class="back-btn" (click)="goBack()">Back to Products</button>
  </div>
</div>
<app-footer></app-footer>