<div class="admin-list-container">
  <div class="page-header">
    <h1>Admin Management</h1>
    <button class="btn-primary" (click)="showAddForm = true">
      <i class="bi bi-plus-circle"></i>
      Add New Admin
    </button>
  </div>

  <!-- Add Admin Form -->
  <div *ngIf="showAddForm" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Add New Admin</h2>
        <button class="close-btn" (click)="showAddForm = false">&times;</button>
      </div>
      
      <form (ngSubmit)="addAdmin()" class="admin-form">
        <div class="form-group">
          <label>Username</label>
          <input type="text" [(ngModel)]="newAdmin.username" name="username" required>
        </div>
        
        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="newAdmin.email" name="email" required>
        </div>
        
        <div class="form-group">
          <label>Password</label>
          <input type="password" [(ngModel)]="newAdmin.password" name="password" required>
        </div>
        
        <div class="form-group">
          <label>Roles & Permissions</label>
          <div class="roles-grid">
            <div *ngFor="let role of availableRoles" class="role-item">
              <input type="checkbox" 
                     [id]="'role-' + role"
                     [checked]="newAdmin.roles.includes(role)"
                     (change)="toggleRole(role)">
              <label [for]="'role-' + role">{{ role }}</label>
            </div>
          </div>
        </div>
        
        <div class="form-actions">
          <button type="button" class="btn-secondary" (click)="showAddForm = false">Cancel</button>
          <button type="submit" class="btn-primary">Add Admin</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Edit Admin Form -->
  <div *ngIf="editingAdmin" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Edit Admin</h2>
        <button class="close-btn" (click)="cancelEdit()">&times;</button>
      </div>
      
      <form (ngSubmit)="updateAdmin()" class="admin-form">
        <div class="form-group">
          <label>Username</label>
          <input type="text" [(ngModel)]="editingAdmin.username" name="username" required>
        </div>
        
        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="editingAdmin.email" name="email" required>
        </div>
        
        <div class="form-group">
          <label>Roles & Permissions</label>
          <div class="roles-grid">
            <div *ngFor="let role of availableRoles" class="role-item">
              <input type="checkbox" 
                     [id]="'edit-role-' + role"
                     [checked]="editingAdmin.roles.includes(role)"
                     (change)="toggleEditRole(role)">
              <label [for]="'edit-role-' + role">{{ role }}</label>
            </div>
          </div>
        </div>
        
        <div class="form-actions">
          <button type="button" class="btn-secondary" (click)="cancelEdit()">Cancel</button>
          <button type="submit" class="btn-primary">Update Admin</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Admin List Table -->
  <div class="admin-table">
    <table>
      <thead>
        <tr>
          <th>Username</th>
          <th>Email</th>
          <th>Roles</th>
          <th>Status</th>
          <th>Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let admin of admins">
          <td>{{ admin.username }}</td>
          <td>{{ admin.email }}</td>
          <td>
            <div class="roles-list">
              <span *ngFor="let role of admin.roles" class="role-badge">{{ role }}</span>
            </div>
          </td>
          <td>
            <span class="status-badge" [class.active]="admin.status === 'Active'">
              {{ admin.status }}
            </span>
          </td>
          <td>{{ admin.createdAt | date:'short' }}</td>
          <td>
            <div class="action-buttons">
              <button class="btn-edit" (click)="editAdmin(admin)">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn-delete" (click)="deleteAdmin(admin.id)">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>